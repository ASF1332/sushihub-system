generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "debian-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Insumo {
  id            Int            @id @default(autoincrement())
  nome          String         @unique
  categoria     String
  unidade       String         @default("un")
  estoque       Float          @default(0)
  estoqueMinimo Float          @default(0)
  preco         Float          @default(0)
  produtos      FichaTecnica[]
}

model Produto {
  id               Int            @id @default(autoincrement())
  nome             String
  preco            Float
  categoria        String
  precoPromocional Float?
  fichaTecnica     FichaTecnica[]
  itensPedido      ItemPedido[]
}

model FichaTecnica {
  id         Int     @id @default(autoincrement())
  produtoId  Int
  insumoId   Int
  quantidade Float
  medida     String
  insumo     Insumo  @relation(fields: [insumoId], references: [id])
  produto    Produto @relation(fields: [produtoId], references: [id])
}

model Pedido {
  id       Int          @id @default(autoincrement())
  cliente  String
  telefone String?
  canal    String
  status   String
  valor    Float
  dataHora DateTime     @default(now())
  itens    ItemPedido[]
}

model ItemPedido {
  id         Int     @id @default(autoincrement())
  pedidoId   Int
  produtoId  Int
  quantidade Int
  pedido     Pedido  @relation(fields: [pedidoId], references: [id])
  produto    Produto @relation(fields: [produtoId], references: [id])
}

model Cliente {
  id          Int     @id @default(autoincrement())
  nome        String
  telefone    String  @unique
  cep         String?
  logradouro  String?
  numero      String?
  bairro      String?
  cidade      String?
  estado      String?
  complemento String?
}
